<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="./css/style.css">
</head>

<body>
    <!-- ADDRESS PROFILE LIST PAGE = HOME PAGE -->
    <!-- ADDRESS PROFILE PAGE = PAGE TO SHOW THING INSIDE AN ADDRESS PROFILE -->

    <!-- ADDRESS PROFILE LIST PAGE START -->
    <section id="address-profile-list-section">
        <h2>Address Profile</h2>
        <ul id="address-profile-list">
        </ul>
        <div id="new-address-profile-div">
            <button id="new-address-profile-btn">create address profile</button>
            <form action="#" class="form-group hide" id="new-address-profile-form">
                <div class="input-group">
                    <label for="create-new-address-profile-country">country:</label>
                    <select id="create-new-address-profile-country" required>
                        <option disabled selected hidden>(iso3166Code)</option>
                        <option value="ABW">ABW</option>
                        <option value="AFG">AFG</option>
                        <option value="GLP">GLP</option>
                        <option value="HKG">HKG</option>
                        <option value="IDN">IDN</option>
                    </select>
                </div>

                <button id="create-new-address-profile-btn">create</button>

            </form>
        </div>
    </section>
    <!-- ADDRESS PROFILE LIST PAGE END -->

    <!-- ADDRESS PROFILE PAGE START -->
    <section id="address-profile-section" class="hide">
        <!-- currentAddressProfileName will show the current selected profile iso3166Code -->
        <h2 id="currentAddressProfileName">DOM</h2>

        <h3>Address Class Profiles:</h3>
        <ul id="address-class-profiles">
            <li>
                <div>
                    <span>component 1 (ID)</span>
                    <span>type: dsadas</span>
                </div>
                <div>
                    <span class="expend-span">desc: this is a desc fdsfsdfsdfds fsd fsdfsd fsd fsdf sdf sd fdfsd fds fsdfds</span>
                </div>

                <div>
                    <span>localization: dasda das adas da</span>
                </div>
                <div>
                    <span>time to live: dsadasdas das asd fds fgsdf  da</span>
                </div>
                <div>
                    <span>validity: dasda das adas da</span>
                </div>
                <div>
                    <span>component:</span>

                </div>
                <div>
                    <ul>
                        <li>
                            <div>component 1</div>
                            <div>
                                <div>min: 1</div>
                                <div>max: 3</div>
                            </div>
                        </li>
                    </ul>

                </div>
                <div class="add-item-btn-div">
                    <div class="add-item-btn">+</div>
                </div>
            </li>
        </ul>
        <div class="add-item-btn-div">
            <div class="add-item-btn" id="new-address-class-profile-btn">+</div>
        </div>
        <div id="new-address-class-profile-div" class="hide">
            <form action="#" class="form-group">
                <h4>new address class profile:</h4>
                <div class="input-group">
                    <label for="address-class-profile-id">id:</label>
                    <input class="form-group-input" type="text" id="address-class-profile-id" required value=1>
                </div>
                <div class="input-group">
                    <label for="address-class-profile-type">type:</label>
                    <input type="text" id="address-class-profile-type" required value="type1">
                </div>
                <div class="input-group">
                    <label for="address-class-profile-description">description:</label>
                    <textarea id="address-class-profile-description" cols="30" rows="1" required>desc1</textarea>
                </div>
                <div class="input-group">
                    <label for="address-class-profile-localization">localization:</label>
                    <input type="text" id="address-class-profile-localization" required value="localization1">
                </div>
                <div class="input-group">
                    <label for="address-class-profile-timeToLive">timeToLive:</label>
                    <input type="text" id="address-class-profile-timeToLive" required value="10">
                </div>
                <div class="input-group">
                    <label for="address-class-profile-validity">validity:</label>
                    <input type="text" id="address-class-profile-validity" required value="validity1">
                </div>

                <button id="create-new-address-class-profile-btn">create</button>
            </form>
        </div>

        <h3>Address Component Profiles:</h3>
        <ul id="address-component-profiles">
            <li>
                <div>
                    <span>component 1(KEY)</span>
                </div>
                <div>
                    <span>desc: ds dasd asdsa dasd asdasda wdd asd asdas dasd asd as</span>
                </div>
            </li>
        </ul>
        <div class="add-item-btn-div">
            <div class="add-item-btn" id="new-address-component-profile-btn">+</div>
        </div>
        <div id="new-address-component-profile-div" class="hide">
            <form action="#" class="form-group">
                <h4>new address component profile:</h4>
                <div class="input-group">
                    <label for="address-component-profile-key">key:</label>
                    <input class="form-group-input" type="text" id="address-component-profile-key" required value="component 1">
                </div>
                <div class="input-group">
                    <label for="address-component-profile-description">description:</label>
                    <textarea id="address-component-profile-description" cols="30" rows="1" required>desc 1</textarea>
                </div>
                <div class="input-group">
                    <label for="address-component-profile-example">example:</label>
                    <input type="text" id="address-component-profile-example" required value="example 1">
                </div>


                <button id="create-new-address-component-profile-btn">create</button>
            </form>
        </div>

    </section>
    <!-- ADDRESS PROFILE PAGE END -->
</body>
<script>
    let addressProfiles = [];
    let currentAddressProfile;

    //--FOR ADDRESS PROFILE LIST PAGE START--
    //to show the form for add a new address profile and hide the add btn
    document.querySelector("#new-address-profile-btn").addEventListener("click", (event) => {
        document.querySelector("#new-address-profile-btn").classList.add("hide");
        document.querySelector("#new-address-profile-form").classList.remove("hide");
    });
    //add a new address profile to the memory
    document.querySelector("#create-new-address-profile-btn").addEventListener("click", (event) => {
        addressProfiles.push({
            code: document.querySelector("#create-new-address-profile-country").value,
            addressClassProfiles: [],
            addressComponentProfiles: []
        });
        refreshAddressProfileList();
        document.querySelector("#new-address-profile-btn").classList.remove("hide");
        document.querySelector("#new-address-profile-form").classList.add("hide");
    });

    const refreshAddressProfileList = () => {
        addressProfiles.forEach((addressProfileItem) => {
            const addressProfileLi = document.createElement("li");
            addressProfileLi.appendChild(document.createTextNode(addressProfileItem.code));
            addressProfileLi.addEventListener("click", (event) => {
                //change the current address profile to the selected one
                currentAddressProfile = addressProfileItem;
                //display information in a address profile
                displayAddressProfile();

            });
            document.querySelector("#address-profile-list").appendChild(addressProfileLi);
        });
    };

    const displayAddressProfile = () => {
        //show the content of this address profile and hide the address profile list page
        document.querySelector("#address-profile-list-section").classList.add("hide");
        document.querySelector("#address-profile-section").classList.remove("hide");
        refreshAddressProfile();
    };

    //--FOR ADDRESS PROFILE LIST PAGE END--


    //--FOR ADDRESS PROFILE PAGE START--

    const refreshAddressProfile = () => {
        document.querySelector("#currentAddressProfileName").innerHTML = currentAddressProfile.code;

        //for display address class profile list of the current address profile
        document.querySelector("#address-class-profiles").innerHTML = "";
        currentAddressProfile.addressClassProfiles.forEach((addressClassProfileItem) => {
            const addressClassProfileLi = document.createElement("li");
            addressClassProfileLi.innerHTML =
                `
                <div>
                    <span>${addressClassProfileItem.id}</span>
                    <span>type: ${addressClassProfileItem.type}</span>
                </div>
                <div>
                    <span class="expend-span">desc: ${addressClassProfileItem.description}</span>
                </div>

                <div>
                    <span>localization: ${addressClassProfileItem.locatization}</span>
                </div>
                <div>
                    <span>time to live: ${addressClassProfileItem.timeToLive}</span>
                </div>
                <div>
                    <span>validity: ${addressClassProfileItem.validity}</span>
                </div>
                <div>
                    <span>component:</span>

                </div>
            `;

            addressClassProfileLi.addEventListener("click", (event) => {
                addressClassProfileLi.classList.contains("expend-li") ?
                    addressClassProfileLi.classList.remove("expend-li") :
                    addressClassProfileLi.classList.add(("expend-li"));
            });

            const addressComponentDiv = document.createElement("div");
            const addressComponentUl = document.createElement("ul");
            addressClassProfileItem.addressComponentProfiles.forEach((addressComponentItem) => {
                const addressComponentLi = document.createElement("li");
                addressComponentLi.innerHTML =
                    `
                    <div>${addressComponentItem.name}</div>
                    <div>valueType: ${addressComponentItem.valueType}</div>
                    <div>
                        <div>min: ${/*hold on*/ "min"}</div>
                        <div>max: ${/*hold on*/"max"}</div>
                    </div>
                    `;
                addressComponentUl.appendChild(addressProfileLi);
            });
            addressComponentDiv.appendChild(addressComponentUl);

            const addressComponentAddBtn = document.createElement("div");
            addressComponentAddBtn.innerHTML = `<div class="add-item-btn">+</div>`;
            addressComponentAddBtn.classList.add("add-item-btn-div");


            addressClassProfileLi.appendChild(addressComponentDiv);
            addressClassProfileLi.appendChild(addressComponentAddBtn);


            document.querySelector("#address-class-profiles").appendChild(addressClassProfileLi);
        });

        //for display address component profile list of the current address profile
        document.querySelector("#address-component-profiles").innerHTML = "";
        currentAddressProfile.addressComponentProfiles.forEach((addressComponentProfileItem) => {
            const addressComponentProfileLi = document.createElement("li");
            addressComponentProfileLi.innerHTML =
                `
                <div>
                    <span>${addressComponentProfileItem.key}</span>
                </div>
                <div>
                    <span>desc: ${addressComponentProfileItem.description}</span>
                </div>
                <div>
                    <span>desc: ${addressComponentProfileItem.example}</span>
                </div>
               `;
            addressComponentProfileLi.addEventListener("click", (event) => {
                addressComponentProfileLi.classList.contains("expend-li") ?
                    addressComponentProfileLi.classList.remove("expend-li") :
                    addressComponentProfileLi.classList.add(("expend-li"));
            });
            document.querySelector("#address-component-profiles").appendChild(addressComponentProfileLi);
        });
    };

    //to show the add address class profile form and hide the add btn 
    document.querySelector("#new-address-class-profile-btn").addEventListener("click", (even) => {
        document.querySelector("#new-address-class-profile-div").classList.remove("hide");
        document.querySelector("#new-address-class-profile-btn").classList.add("hide");
    });

    //to show the add address component profile form and hide the add btn 
    document.querySelector("#new-address-component-profile-btn").addEventListener("click", (even) => {
        document.querySelector("#new-address-component-profile-div").classList.remove("hide");
        document.querySelector("#new-address-component-profile-btn").classList.add("hide");
    });

    //assign the btn for create a new address class profile
    document.querySelector("#create-new-address-class-profile-btn").addEventListener("click", (event) => {
        currentAddressProfile.addressClassProfiles.push({
            id: document.querySelector("#address-class-profile-id").value,
            type: document.querySelector("#address-class-profile-type").value,
            description: document.querySelector("#address-class-profile-description").value,
            locatization: document.querySelector("#address-class-profile-localization").value,
            timeToLive: document.querySelector("#address-class-profile-timeToLive").value,
            validity: document.querySelector("#address-class-profile-validity").value,
            addressComponentProfiles: []
        });
        //hide the form and show the add button again
        document.querySelector("#new-address-class-profile-div").classList.add("hide");
        document.querySelector("#new-address-class-profile-btn").classList.remove("hide");
        refreshAddressProfile();
    });

    //assign the btn for create a new address component profile
    document.querySelector("#create-new-address-component-profile-btn").addEventListener("click", (event) => {
        currentAddressProfile.addressComponentProfiles.push({
            key: document.querySelector("#address-component-profile-key").value,
            description: document.querySelector("#address-component-profile-description").value,
            example: document.querySelector("#address-component-profile-example").value
        });
        //hide the form and show the add button again
        document.querySelector("#new-address-component-profile-div").classList.add("hide");
        document.querySelector("#new-address-component-profile-btn").classList.remove("hide");
        refreshAddressProfile();
    });




    //--FOR ADDRESS PROFILE PAGE END--
</script>

</html>